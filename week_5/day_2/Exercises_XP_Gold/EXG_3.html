<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 3 - Concurrent Execution</title>
</head>
<body>
    <h1>Exercise 3: Concurrent Execution Analysis</h1>
    <p>Open the console to see the output!</p>

    <script>
        let resolveAfter2Seconds = function () {
            console.log("starting slow promise");
            return new Promise(resolve => {
                setTimeout(function () {
                    resolve("slow");
                    console.log("slow promise is done");
                }, 2000);
            });
        };

        let resolveAfter1Second = function () {
            console.log("starting fast promise");
            return new Promise(resolve => {
                setTimeout(function () {
                    resolve("fast");
                    console.log("fast promise is done");
                }, 1000);
            });
        };

        let concurrentStart = async function () {
            console.log('==CONCURRENT START with await==');
            const slow = resolveAfter2Seconds();  // Pas de await ici!
            const fast = resolveAfter1Second();   // Pas de await ici!
            console.log(await slow);              // Attend que slow se termine
            console.log(await fast);              // Déjà résolu
        }

        // Execute after 4 seconds
        setTimeout(concurrentStart, 4000);

        // Expected Output in console after 4 seconds:
        // ==CONCURRENT START with await==
        // starting slow promise
        // starting fast promise
        // (after 1 second) fast promise is done
        // (after 2 seconds) slow promise is done
        // slow
        // fast
    </script>
</body>
</html>